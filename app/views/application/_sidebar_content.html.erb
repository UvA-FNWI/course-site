<turbo-frame id="sidebar-frame" target="_top">

	<%# course.yml hardcoded navigation %>

	<% if Course.modules.any? %>
	<ul class="nav">
		<li>
			<p class="ms-1"><%= current_module ? t(:other) : t(:modules) %></p>
		</li>
		<% Course.modules.each do |title, url|  %>
		<li><%= link_to title.html_safe, url, class:"nav-link" %></li>
		<% end %>
	</ul>
	<% end %>

	<%# schedule-based navigation %>

	<% if current_module %>
	<ul class="nav">
		<li>
			<div class="nav-head text-dark d-flex justify-content-between">
				<div id="schedule_name" class="<%= 'unavailable' if !current_module.public? %>">
					<%= render 'schedule_dropdown' %>
				</div>
				<% if current_schedule.self_service %>
				<div class="ms-auto me-n1">
					<%= button_to prev_module.present? ? profile_prev_path : '', method: :post, id: 'schedule_prev_button', disabled:!prev_module.present?, class: 'btn btn-link p-0', form: { style: "display:inline;", data: {'turbo-frame': 'sidebar-frame'} } do bootstrap_icon('chevron-left', class: 'rounded', style: 'vertical-align:-4px;').html_safe end %>
					<%= button_to next_module.present? ? profile_next_path : '', method: :post, id: 'schedule_next_button', disabled:!next_module.present?, class: 'btn btn-link p-0', form: { style: "display:inline;", data: {'turbo-frame': 'sidebar-frame'} } do bootstrap_icon('chevron-right', class: 'rounded', style: 'vertical-align:-4px;').html_safe end %>
				</div>
				<% end %>
			</div>
		</li>
		<li id="schedule">
			<%= links_to_ul(current_module.content) %>
		</li>
	</ul>
	<% end %>

	<%# the full page hierarchy %>

	<% if current_user.admin? && current_sections.any? %>
	<ul id="sections" class="nav mt-3">
		<li>
			<p class="nav-head"><%= t(:materials) %> (Admin only)</p>
		</li>
		<li>
			<ul class="nav materials">
				<%= material_links_to_li(current_sections) %>
			</ul>
		</li>
	</ul>
	<% end %>

</turbo-frame>
